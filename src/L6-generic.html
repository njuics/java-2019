<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>æ³›å‹ Generics</title>
</head>

<body>

    <div class="reveal">
        <div class="slides">

            <section class="title-slide">
                <div class="huge framed bordered border-3x font-passionone bg-warning-alpha-08">
                    æ³›å‹ Generics
                </div>
            </section>
            <section>
                <div class="down-30 center">
                    è¿™å¯èƒ½æ˜¯è¿™é—¨è¯¾ä¸­æœ€éš¾ç†è§£çš„ä¸€ç« ã€‚
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>æ³›å‹</h2>
                </div>
                <div class="down-9 small">
                    æ³›å‹ç¨‹åºè®¾è®¡ï¼ˆGeneric Programmingï¼‰æ˜¯ç¨‹åºè®¾è®¡è¯­è¨€çš„ä¸€ç§é£æ ¼æˆ–èŒƒå¼ã€‚æ³›å‹å…è®¸ç¨‹åºå‘˜åœ¨å¼ºç±»å‹ç¨‹åºè®¾è®¡è¯­è¨€ä¸­ç¼–å†™ä»£ç æ—¶ä½¿ç”¨ä¸€äº›ä»¥åæ‰æŒ‡å®šçš„ç±»å‹ï¼Œåœ¨å®ä¾‹åŒ–æ—¶ä½œä¸ºå‚æ•°æŒ‡æ˜è¿™äº›ç±»å‹ã€‚...
                    Adaã€Delphiã€Eiffelã€Javaã€C#ã€F#ã€Swift å’Œ Visual Basic .NET ç§°ä¹‹ä¸ºæ³›å‹ï¼ˆgenericsï¼‰ï¼›MLã€Scala å’Œ Haskell
                    ç§°ä¹‹ä¸ºå‚æ•°å¤šæ€ï¼ˆparametric polymorphismï¼‰ï¼›C++ å’Œ Dç§°ä¹‹ä¸ºæ¨¡æ¿ã€‚ã€ŠDesign Patternsã€‹ä¸€ä¹¦ç§°ä¹‹ä¸ºå‚æ•°åŒ–ç±»å‹ï¼ˆparameterized typeï¼‰ã€‚
                </div>
                <div class="down-3 tiny right">
                    https://zh.wikipedia.org/wiki/%E6%B3%9B%E5%9E%8B
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>Java Generics</h2>
                </div>
                <div class="down-9">
                    <div class="down-1">
                        <ul>
                            <li class="down-3">
                                A way to control a class type definitions
                            </li>
                            <li class="down-3">
                                A way of improving the clarity of code
                            </li>
                            <li class="down-3">
                                A way of avoiding <span class="strong">casts</span> in code, turning run-time errors
                                (typically <span class="strong">ClassCastException</span>) into compile-time errors.
                            </li>
                        </ul>
                    </div>
                </div>

            </section>

            <section>
                <div class="down-3">
                    <h2>Without Generics</h2>
                </div>
                <div class="down-9">
                    <pre class="java">
                        <code data-trim>
                            class Stack{
                                void push(Object o){...}
                                Object pop(){...}
                            }

                            String s = "Hello";
                            Stack st = new Stack();
                            ...
                            st.push(s);
                            ...
                            s = (String)st.pop();
                        </code>
                        
                    </pre>
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>With Generics</h2>
                </div>
                <div class="down-9">
                    <pre class="java">
                            <code data-trim>
                                    class Stack&lt;A&gt;{ // ç±»å‚æ•°
                                            void push(A a){...}
                                            A pop(){...}
                                    }
                                    String s = "Hello";
                                    Stack&lt;String&gt; st = new Stack&lt;String&gt;();
                                    st.push(s);
                                    ...
                                    s = st.pop();
                            </code>
                            
                        </pre>
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>è‘«èŠ¦å¨ƒä¸­çš„ä¾‹å­</h2>
                </div>
                <div class="down-9">
                    <pre class="java">
                        <code data-trim>
                                public class Position {
                                    private Object holder;
                                    public Position(Object holder) { 
                                        this.holder = holder; 
                                    }
                                    Object get() { 
                                        return holder; 
                                    }
                                }
                        </code>
                        
                    </pre>
                </div>

                <div class="down-5 fragment danger center"><code>Postion</code>é‡Œæ”¾ä»»æ„ä¸œè¥¿</div>
            </section>

            <section>
                <div class="down-3">
                    <h2>æ”¹è¿›ä¸€ä¸‹</h2>
                </div>
                <div class="down-9">
                    <pre class="java">
                                    <code data-trim>
                                            public class Position {
                                                private Creature holder;
                                                public Position(Creature holder) { 
                                                    this.holder = holder; 
                                                }
                                                Creature get() { 
                                                    return holder; 
                                                }
                                            }
                                    </code>
                                    
                                </pre>
                </div>

                <div class="down-5 fragment danger center">
                    é€šè¿‡æ„é€ æ–¹æ³•å’Œgetæ–¹æ³•æˆ‘ä»¬èƒ½çœ‹å‡º<code>Position</code>é‡Œæ”¾çš„æ˜¯<code>Creature</code></div>
            </section>

            <section>
                <div class="down-3">
                    <h2>ä½†å¦‚æœæ˜¯è¿™æ ·å‘¢ï¼Ÿ</h2>
                </div>
                <div class="down-9">
                    <pre class="java">
                        <code data-trim>
                                public class Position {
                                    private Creature holder;
                                }
                        </code>
                        
                    </pre>
                </div>

                <div class="down-5 fragment danger center">ä»å¤–éƒ¨è§‚å¯Ÿï¼Œä½•ä»¥äº†è§£<code>Position</code>é‡Œæ˜¯æ”¾<code>Creature</code>çš„?
                </div>
            </section>
            <section>
                <div class="down-3">
                    <h2>æ˜¾å¼è¯´æ˜ä¸€ä¸‹</h2>
                </div>
                <div class="down-9">
                    <pre class="java">
                        <code data-trim>
                                public class Position&lt;T&gt;{
                                        private T holder;
                                }
                        </code>
                        
                    </pre>
                </div>

                <div class="down-5 fragment danger center">æ˜¾å¼è¡¨è¾¾â€œæŸç§ä¸ç¡®å®šâ€: Positioné‡Œæ˜¯è¦æ”¾ä¸œè¥¿çš„ï¼Œä½†ä¸ç¡®å®šæ˜¯ä»€ä¹ˆä¸œè¥¿
                </div>
            </section>
            <section>
                <div class="down-3">
                    <h2>è¯´å¾—å†æ˜ç™½ä¸€ç‚¹</h2>
                </div>
                <div class="down-9">
                    <pre class="java">
                        <code data-trim>
                                public class Position&lt;T extends Creature&gt;{
                                        private T holder;
                                }
                        </code>
                        
                    </pre>
                </div>

                <div class="down-5 fragment danger center">æ˜¾å¼è¡¨è¾¾Positioné‡Œæ˜¯è·ŸæŸç§Creature
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2> å†å®šä¹‰ä¸€ä¸ªComputer </h2>
                </div>
                <div class="down-3">
                    <pre class="java">
                                        <code data-trim>
                                                public class Computer{

                                                    private HDD mHarddisk;   // æœºæ¢°ç¡¬ç›˜
                                                    
                                                    Computer(HDD harddisk){
                                                        mHarddisk = harddisk;
                                                    }
                                                    
                                                    public Data readDisk(){
                                                        return mHarddisk.read();
                                                    }
                                                    
                                                    public void writeDisk(Data data){
                                                        mHarddisk.write(data);
                                                    }
                                                }
                                        </code>
                                        
                                    </pre>
                </div>

                <div class="down-1 fragment danger center">
                    å¦‚æœå®‰è£…çš„æ˜¯SSDæ€ä¹ˆåŠï¼Ÿ</div>
            </section>
            <section>
                <div class="down-3">
                    <h2> å®šä¹‰ä¸€ä¸ªSSDComputerï¼Ÿ </h2>
                </div>
                <div class="down-3">
                    <pre class="java">
                                                <code data-trim>
                                                        public class SSDComputer{

                                                            private SSD mHarddisk;   // SSDç¡¬ç›˜
                                                            
                                                            Computer(SSD harddisk){
                                                                mHarddisk = harddisk;
                                                            }
                                                            
                                                            public Data readDisk(){
                                                                return mHarddisk.read();
                                                            }
                                                            
                                                            public void writeDisk(Data data){
                                                                mHarddisk.write(data);
                                                            }
                                                        }
                                                </code>
                                                
                                            </pre>
                </div>

                <div class="down-1 fragment danger center">
                    è¿™å½“ç„¶ä¸å¥½ï¼</div>
            </section>

            <section>
                <div class="down-3">
                    <h2> æŠ½è±¡ä¸€ä¸‹ </h2>
                </div>
                <div class="down-1">
                    <pre class="java">
                        <code data-trim>
                                public abstract class Disk{};
                                public class SSD extends Disk{};
                                public class HHD extends Disk{};
                                public class Computer{

                                    private Disk disk;   // æŠ½è±¡çš„ç¡¬ç›˜
                                    
                                    Computer(Disk disk){
                                        this.disk = disk;
                                    }
                                    
                                    public Data readDisk(){
                                        return disk.read();
                                    }
                                    
                                    public void writeDisk(Data data){
                                        disk.write(data);
                                    }
                                }
                        </code>
                                                    
                    </pre>
                </div>

                <div class="down-1 fragment danger center">
                    åŸºäºå¤šæ€å®ç°è®¾è®¡æŠ½è±¡ï¼ˆè§£è€¦ï¼‰ </div>
            </section>

            <section>
                <div class="down-3">
                    <h2> ç”¨æ³›å‹æ¥åš </h2>
                </div>
                <div class="down-1">
                    <pre class="java">
                        <code data-trim>
                                public class Computer&lt;T extends Disk&gt;{
                                    private T disk;   // å‚æ•°ç±»
                                    Computer(T disk){
                                        this.disk = disk;
                                    }
                                    public Data readDisk(){
                                        return disk.read();
                                    }
                                    public void writeDisk(Data data){
                                        disk.write(data);
                                    }
                                    public T getDisk(){
                                        return disk;
                                    }
                                    public void setDisk(T disk){
                                        return this.disk = disk;
                                    }
                                
                                    public static void main(String[] args) {
                                        Computer&lt;SSD&gt; computer = new Computer&lt;SSD&gt;(new SSD());
                                        SSD disk = computer.getDisk(); // No cast needed
                                        //computer.setDisk(new HHD()); // error!
                                    }
                                }
                        </code>
                        
                    </pre>
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2> æ³›å‹æ–¹æ³• </h2>
                </div>
                <div class="down-9">
                    <pre class="java">
                            <code data-trim>
                                    public class GenericMethods {
                                        public &lt;T&gt; void f(T x) {
                                            System.out.println(x.getClass().getName());
                                        }
                                        public static void main(String[] args) {
                                            GenericMethods gm = new GenericMethods();
                                            gm.f("");
                                            gm.f(1); //autoboxing
                                            gm.f(1.0);
                                            gm.f(1.0F);
                                            gm.f(â€˜câ€™);
                                            gm.f(gm);
                                        }
                                    }
                            </code>
                            
                        </pre>
                </div>
            </section>
            <section>
                <div class="down-3">
                    <h2> å†çœ‹å®¹å™¨ </h2>
                </div>
                <div class="down-1">
                    <pre class="java">
                                <code data-trim>
                                    public class Holder&lt;T&gt; {
                                            private T obj;
                                            public void set(T obj){
                                                this.obj = obj;
                                            }
                                            public T get(){
                                                return obj;
                                            }
                                            public static void main(String[] args){
                                                Holder&lt;Integer&gt; holder = new Holder&lt;&gt;();
                                                holder.set(1);
                                                //holder.set("Abc"); // error
                                                Integer obj = holder.get(); //æ— é¡»cast
                                            }       
                                    }
                                </code>
                                                            
                            </pre>
                </div>

                <div class="down-1  large danger center">
                    <span class="fragment"> å¤šå®Œç¾ï¼</span> <span class="fragment">
                        å¯æƒœè¿™åªæ˜¯ç¼–è¯‘æ—¶åˆ»... å› ä¸ºè¿è¡Œæ—¶çš„ç±»å‹ä¿¡æ¯è¢«æ“¦æ‰äº†</span>
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2> æ“¦é™¤ </h2>
                </div>
                <div class="down-1">
                    <pre class="java">
                                    <code data-trim>
                                            public class Computer&lt;T extends Disk&gt;{
                                                private T disk;   // è¿è¡Œæ—¶diskæ˜¯Diskç±»å‹
                                                Computer(T disk){
                                                    disk = disk;
                                                }
                                            }
                                    </code>
                                                                
                                </pre>
                </div>

                <div class="down-1  large danger center">
                    <span class="fragment">
                        Javaæ³›å‹çš„å®ç°æ–¹å¼å°±æ˜¯å°†ç±»å‹å‚æ•°ç”¨è¾¹ç•Œç±»å‹æ›¿æ¢ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å°±æ˜¯æŠŠTç”¨Diskæ›¿æ¢ã€‚è¿™ç§å®ç°æ–¹å¼çœ‹ä¸Šå»å°±åƒæ˜¯æŠŠå…·ä½“çš„ç±»å‹ï¼ˆæŸç§ç¡¬ç›˜ï¼Œæœºæ¢°çš„æˆ–è€…æ˜¯å›ºæ€çš„ï¼‰ï¼Œæ“¦é™¤åˆ°äº†è¾¹ç•Œç±»å‹ï¼ˆå®ƒä»¬çš„çˆ¶ç±»Disk)ã€‚</span>
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>è¿™ä¸¤ä¸ªæ˜¯ç›¸åŒç±»å‹ä¹ˆï¼Ÿ </h2>
                </div>
                <div class="down-1">
                    <pre class="java">
                        <code data-trim>
                                ArrayList&lt;Integer&gt; intList = new ArrayList&lt;&gt;();
                                ArrayList rawList = new ArrayList();
                                
                                System.out.println(intList.getClass().getSimpleName());
                                System.out.println(rawList.getClass().getSimpleName());
                        </code>
                                                    
                    </pre>
                </div>


            </section>

            <section>
                <div class="down-3">
                    <h2> æ“¦é™¤çš„åæœ </h2>
                </div>
                <div class="down-1">
                    <pre class="java">
                            <code data-trim>
                                public class Holder&lt;T&gt; {
                                    private T obj;
                                    public void set(T obj){
                                        this.obj = obj;
                                    }
                                    public T get(){
                                        return obj;
                                    }
                                    public void testT(Object arg){
                                        if (arg instanceof T){ ... } //ç¼–è¯‘é”™è¯¯
                                        T var = new T(); //ç¼–è¯‘é”™è¯¯
                                        T[] array = new T[100]; //ç¼–è¯‘é”™è¯¯
                                        }
                                    }
                                }
                            </code>
                                                        
                        </pre>
                </div>

                <div class="down-1  large danger center">
                    <span class="fragment">
                        è¿™åŠ³ä»€å­æœ‰ä½•ç”¨ï¼Ÿï¼</span>
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>Tå­˜åœ¨çš„æ„ä¹‰</h2>
                </div>
                <div class="down-1">
                    <pre class="java">
                        <code data-trim>
                                public class Holder&lt;T&gt; {
                                    private T obj; //åœ¨ç¼–è¯‘æ—¶ï¼Œè¯¥ç±»ä¸­çš„æ‰€æœ‰çš„Téƒ½ä¼šè¢«æ›¿æ¢ä¸ºè¾¹ç•Œç±»å‹Objectã€‚
                                    public void set(T obj){
                                        this.obj = obj;
                                    }
                                    public T get(){
                                        return obj;
                                    }
                                    public static void main(String[] args){
                                        Holder&lt;Integer&gt; holder = new Holder&lt;&gt;();
                                        //ç¼–è¯‘å™¨ä¼šæ£€æŸ¥å®å‚æ˜¯ä¸æ˜¯ä¸€ä¸ªIntegerï¼Œ
                                        //è™½ç„¶è¿™é‡Œçš„1æ˜¯intç±»å‹ï¼Œä½†æ˜¯å› ä¸ºè‡ªåŠ¨åŒ…è£…æœºåˆ¶çš„å­˜åœ¨ï¼Œ
                                        //ä»–ä¼šè¢«è½¬åŒ–ä¸ºä¸€ä¸ªIntegerï¼Œå› æ­¤èƒ½å¤Ÿé€šè¿‡ç±»å‹æ£€æŸ¥ã€‚
                                        holder.set(1); 
                                        //ç¼–è¯‘å™¨ä¹Ÿä¼šè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œ
                                        //å¹¶ä¸”è‡ªåŠ¨æ’å…¥ä¸€ä¸ªObjectç±»å‹åˆ°Integerç±»å‹çš„è½¬å‹æ“ä½œã€‚
                                        Integer obj = holder.get();
                                    }       
                                }
                        </code>                     
                    </pre>
                </div>
            </section>
            <section>
                <div class="down-3">
                    <h2>æ³›å‹çš„å®é™…å®ç°</h2>
                </div>
                <div class="down-3">å¯¹æ³›å‹çš„å¤„ç†å…¨éƒ¨é›†ä¸­åœ¨ç¼–è¯‘æœŸï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæ‰§è¡Œå¦‚ä¸‹æ“ä½œ: </div>
                <div class="down-1">
                    <div class="down-1">
                        <ul>
                            <li class="down-3">
                                ä¼šå°†æ³›å‹ç±»çš„ç±»å‹å‚æ•°éƒ½ç”¨è¾¹ç•Œç±»å‹æ›¿æ¢
                            </li>
                            <li class="down-3">
                                å¯¹äºä¼ å…¥å¯¹è±¡ç»™æ–¹æ³•å½¢å‚çš„æŒ‡ä»¤ï¼Œç¼–è¯‘å™¨ä¼šæ‰§è¡Œä¸€ä¸ªç±»å‹æ£€æŸ¥ï¼Œçœ‹ä¼ å…¥çš„å¯¹è±¡æ˜¯ä¸æ˜¯ç±»å‹å‚æ•°æ‰€æŒ‡å®šçš„ç±»å‹
                            </li>
                            <li class="down-3">
                                å¯¹äºè¿”å›ç±»å‹å‚æ•°è¡¨ç¤ºå¯¹è±¡çš„æŒ‡ä»¤ï¼Œä¹Ÿä¼šæ‰§è¡Œä¸€ä¸ªç±»å‹æ£€æŸ¥ï¼Œè¿˜ä¼šæ’å…¥ä¸€ä¸ªè‡ªåŠ¨çš„å‘ä¸‹è½¬å‹ï¼Œå°†å¯¹è±¡ä»è¾¹ç•Œç±»å‹å‘ä¸‹è½¬å‹åˆ°ç±»å‹å‚æ•°æ‰€è¡¨ç¤ºçš„ç±»å‹
                            </li>
                        </ul>
                    </div>
                </div>

            </section>

            <section>
                <div class="down-3">
                    <h2> æ‰€ä»¥è¿™äº›éƒ½æ˜¯é”™çš„ </h2>
                </div>
                <div class="down-1">
                    <pre class="java">
                        <code data-trim>
                            public class Holder&lt;T&gt; {
                                private T obj;
                                public void set(T obj){
                                    this.obj = obj;
                                }
                                public T get(){
                                    return obj;
                                }
                                public void testT(Object arg){
                                    if (arg instanceof T){ ... } //ç¼–è¯‘é”™è¯¯
                                    T var = new T(); //ç¼–è¯‘é”™è¯¯
                                    T[] array = new T[100]; //ç¼–è¯‘é”™è¯¯
                                    }
                                }
                            }
                        </code>
                                                    
                    </pre>
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>å¦‚æœçœŸæƒ³ç”Ÿæˆæ³›å‹å¯¹è±¡ï¼Ÿ</h2>
                </div>
                <div class="down-1">
                    <pre class="java">
                            <code data-trim>
                                class Holder&lt;T&gt;{
                                    private T t;
                                    public void init(IFactory&lt;T&gt; factory){
                                        this.t = factory.create();  // æ­¤å¤„å³ä¸ºnew T()çš„å·¥å‚æ–¹æ³•çš„å®ç°
                                    }
                                }
                                
                                interface IFactory&lt;T&gt;{  //æ¥å£ä¹Ÿå¯ä»¥å‚æ•°åŒ–
                                    T create();
                                }
                                
                                class IntegerFactory implements IFactory&lt;Integer&gt;{
                                    public Integer create(){
                                        return new Integer(10);
                                    }
                                }
                                
                                public class newTwithFactory{
                                    public static void main(String[] args){
                                        Holder&lt;Integer&gt; holder = new Holder&lt;&gt;();
                                        holder.init(new IntegerFactory());
                                    }
                                }
                            </code>
                                                        
                        </pre>
                </div>
            </section>
            <section>
                <div class="down-3">
                    <h2>æˆ–è€…å¯ä»¥ä½¿ç”¨RTTI</h2>
                </div>
                <div class="down-1">
                    <pre class="java">
                            <code data-trim>
                                    class Holder&lt;T&gt;{
                                            private T t;
                                            private Class&lt;T&gt; kind;
                                            public Holder(Class&lt;T&gt; kind){
                                                this.kind = kind;
                                            }
                                            public void init(){
                                                try{
                                                    this.t = kind.newInstance();
                                                }catch (Exception e){
                                                    e.printStackTrace();
                                                }
                                            }
                                            public static void main(String[] args) {
                                                Holder&lt;Integer&gt; holder = new Holder&lt;&gt;(Integer.class);
                                                holder.init();
                                            }
                                    }
                            </code>
                                                        
                        </pre>
                </div>
            </section>
            <section>
                <div class="down-3">
                    <h2>è¾¹ç•Œ Bounds</h2>
                </div>
                <div class="down-3">
                    ç”¨<code>extends</code>ç”³æ˜å¯¹å‚æ•°ç±»å‹çš„é™åˆ¶æ¡ä»¶
                </div>
                <div class="down-1">
                    <pre class="java">
                        <code data-trim>
                                interface HasColor{ java.awt.Color getColor(); }

                                class Colored &lt;T extends HasColor&gt;{...}

                                class Dimension { public int x,y,z; }

                                class ColoredDimension &lt;T extends HasColor & Dimension&gt;{...} //é”™è¯¯ï¼
                                class ColoredDimension &lt;T extends Dimension & HasColor&gt;{
                                    
                                }
                        </code>              
                    </pre>
                </div>
            </section>
            <section>
                <div class="down-3">
                    <h2>çœ‹çœ‹è¿™ä¸ªä¾‹å­</h2>
                </div>

                <div class="down-9">
                    <pre class="java">
                            <code data-trim>
                                class Fruit{}
                                class Apple extends Fruit{}

                                public class NonConvariantGeneric {
                                    List&lt;Fruit&gt; flist = new ArrayList&lt;Apple&gt;(); //ç¼–è¯‘é”™è¯¯
                                }
                            </code>              
                        </pre>
                </div>
            </section>
            <section>
                <div class="down-3">
                    <h2>å†çœ‹çœ‹è¿™ä¸ªä¾‹å­</h2>
                </div>

                <div class="down-1">
                    <pre class="java">
                        <code data-trim>
                            class Fruit {}
                            class Apple extends Fruit {}
                            
                            class Plate&lt;T&gt;{
                                private T item;
                                public Plate(T t){item=t;}
                                public void set(T t){item=t;}
                                public T get(){return item;}
                            }
                            
                            //ç°åœ¨æˆ‘å®šä¹‰ä¸€ä¸ªâ€œæ°´æœç›˜å­â€ï¼Œé€»è¾‘ä¸Šæ°´æœç›˜å­å½“ç„¶å¯ä»¥è£…è‹¹æœã€‚
                            //ä½†å®é™…ä¸ŠJavaç¼–è¯‘å™¨ä¸å…è®¸è¿™ä¸ªæ“ä½œã€‚ä¼šæŠ¥é”™ï¼Œâ€œè£…è‹¹æœçš„ç›˜å­â€æ— æ³•è½¬æ¢æˆâ€œè£…æ°´æœçš„ç›˜å­â€ã€‚
                            Plate&lt;Fruit&gt; p=new Plate&lt;Apple&gt;(new Apple()); //ç¼–è¯‘é”™è¯¯ï¼
                        </code>              
                    </pre>
                </div>
                <div class="down-1  large danger center">
                    <span class="fragment">
                        â€œè‹¹æœâ€ IS-A â€œæ°´æœâ€</span>
                </div>
                <div class="down-1  large danger center">
                    <span class="fragment">
                        BUT â€œè£…è‹¹æœçš„ç›˜å­â€ NOT-IS-A â€œè£…æ°´æœçš„ç›˜å­â€ï¼</span>
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>åå˜ä¸é€†å˜</h2>
                </div>

                <div class="down-9">
                    åå˜ä¸é€†å˜(Covariance and contravariance )æ˜¯åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæè¿°å…·æœ‰çˆ¶/å­å‹åˆ«å…³ç³»çš„å¤šä¸ªå‹åˆ«é€šè¿‡å‹åˆ«æ„é€ å™¨ã€æ„é€ å‡ºçš„å¤šä¸ªå¤æ‚å‹åˆ«ä¹‹é—´æ˜¯å¦æœ‰çˆ¶/å­å‹åˆ«å…³ç³»çš„ç”¨è¯­ã€‚
                </div>
                <div class="down-3 right tiny">
                    https://zh.wikipedia.org/wiki/%E5%8D%8F%E5%8F%98%E4%B8%8E%E9%80%86%E5%8F%98
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>é€šé…ç¬¦</h2>
                </div>

                <div class="down-9">
                    <pre class="java">
                            <code data-trim>
                                    class Fruit{}
                                    class Apple extends Fruit{}
                                    public class GenericsAndCovariance {
                                        public static void main(String[] args){
                                            //ä¸€ä¸ªèƒ½æ”¾æ°´æœä»¥åŠä¸€åˆ‡æ˜¯æ°´æœæ´¾ç”Ÿç±»çš„ç›˜å­,å•¥æ°´æœéƒ½èƒ½æ”¾çš„ç›˜å­
                                            //Plate&lt;ï¼Ÿ extends Fruit&gt;å’ŒPlate&lt;Apple&gt;æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼š
                                            //Plate&lt;ï¼Ÿ extends Fruit&gt;æ˜¯Plate&lt;Fruit&gt;ä»¥åŠPlate&lt;Apple&gt;çš„åŸºç±»ã€‚
                                            Plate&lt;? extends Fruit&gt; p=new Plate&lt;Apple&gt;(new Apple());
                                            // a list of any type that's inherited from Fruit
                                            List&lt;? extends Fruit&gt; flist = new ArrayList&lt;Apple&gt;();
                                        }
                                    }
                            </code>              
                        </pre>
                </div>

            </section>
            <section>
                <div class="down-3">
                    <h2>æ‰©å±•ä¸€ä¸‹</h2>
                </div>

                <div class="down-9">
                    <pre class="java">
                            <code data-trim>
                                    class Food{}
                                    //Lev 2
                                    class Fruit extends Food{}
                                    class Meat extends Food{}
                                    //Lev 3
                                    class Apple extends Fruit{}
                                    class Banana extends Fruit{}
                                    class Pork extends Meat{}
                                    class Beef extends Meat{}
                                    //Lev 4
                                    class RedApple extends Apple{}
                                    class GreenApple extends Apple{}
                            </code>              
                        </pre>
                </div>

            </section>
            <section>

                <div class="down-3">
                    <h2>extends</h2>
                </div>

                <div class="down-1 center">
                    <pre class="java ">
                        <code data-trim>
                                Plate&lt;ï¼Ÿ extends Fruit&gt;
                        </code>              
                    </pre>

                    <div class="center down-1">
                        <img src="https://itimetraveler.github.io/gallery/java-genericity/lowerBounds.png" />

                    </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>But</h2>
                </div>

                <div class="down-1">
                    <pre class="java">
                                <code data-trim>
                                        class Fruit{}
                                        class Apple extends Fruit{}
                                        public class GenericsAndCovariance {
                                            public static void main(String[] args){
                                            Plate&lt;? extends Fruit&gt; p=new Plate&lt;Apple&gt;(new Apple());
                                            
                                                //ä¸èƒ½å­˜å…¥ä»»ä½•å…ƒç´ 
                                                p.set(new Fruit());    //Error
                                                p.set(new Apple());    //Error
                                                //è¯»å–å‡ºæ¥çš„ä¸œè¥¿åªèƒ½å­˜æ”¾åœ¨Fruitæˆ–å®ƒçš„åŸºç±»é‡Œã€‚
                                                Fruit newFruit1=p.get();
                                                Object newFruit2=p.get();
                                                Apple newFruit3=p.get();    //Error
                                            }
                                        }
                                </code>              
                            </pre>
                </div>
                <div class=" large danger center">
                    <span class="fragment">
                        "A Plate of any type that's inherited from Fruit"çš„æ„æ€ä¸æ˜¯"a Plate will hold any type of Fruit"
                    </span>
                    <span class="fragment">
                        , but means "some specific type which is not specify" </span>
                </div>

            </section>

            <section>

                <div class="down-3">
                    <h2>super</h2>
                </div>

                <div class="down-1 center">
                    <pre class="java ">
                            <code data-trim>
                                    //è¡¨è¾¾çš„å°±æ˜¯ç›¸åçš„æ¦‚å¿µï¼šä¸€ä¸ªèƒ½æ”¾æ°´æœä»¥åŠä¸€åˆ‡æ˜¯æ°´æœåŸºç±»çš„ç›˜å­ã€‚
                                    //Plate&lt;ï¼Ÿ super Fruit&gt;æ˜¯Plate&lt;Fruitt&gt;çš„åŸºç±»ï¼Œä½†ä¸æ˜¯Plate&lt;Applet&gt;çš„åŸºç±»
                                    Plate&lt;ï¼Ÿ super Fruit&gt;
                            </code>              
                        </pre>

                    <div class="center down-1">
                        <img src="https://itimetraveler.github.io/gallery/java-genericity/upperBounds.png" />

                    </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>But</h2>
                </div>
                <div class="down-1">
                    <pre class="java">
                        <code data-trim>
                            class Fruit{}
                            class Apple extends Fruit{}
                            public class GenericsAndCovariance {
                                public static void main(String[] args){
                                Plate&lt;? super Fruit&gt; p=new Plate&lt;Fruit&gt;(new Fruit());
                                    //å­˜å…¥å…ƒç´ æ­£å¸¸
                                    p.set(new Fruit());
                                    p.set(new Apple());
                                    //è¯»å–å‡ºæ¥çš„ä¸œè¥¿åªèƒ½å­˜æ”¾åœ¨Objectç±»é‡Œã€‚
                                    Apple newFruit3=p.get();    //Error
                                    Fruit newFruit1=p.get();    //Error
                                    Object newFruit2=p.get();
                                }
                            }
                        </code>              
                    </pre>
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>But</h2>
                </div>
                <div class="down-9">
                    <pre class="java">
                            <code data-trim>
                                    List&lt;?&gt;

                            </code>
                            <code data-trim>
                                    List

                            </code>
                            <code data-trim>
                                    List&lt;Object&gt;
                            </code>              
                        </pre>
                </div>
                <div class=" large danger center">
                    <span class="fragment">
                        åŒºåˆ«ï¼Ÿ </span>
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>Overloading</h2>
                </div>
                <div class="down-9">
                    <pre class="java">
                                <code data-trim>
                                        public class UseList&lt;W,T&gt;{
                                                void f(List&lt;T&gt; v){}
                                                void f(List&lt;W&gt; v){}
                                        }    
                                </code>          
                            </pre>
                </div>
                <div class=" large danger center">
                    <span class="fragment">
                        NOï¼</span>
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>Self-bounded types</h2>
                </div>
                <div class="down-9">
                    <pre class="java">
                                    <code data-trim>
                                            class SelfBounded&lt;T extends SelfBounded&lt;T&gt;&gt;{
                                                    ...
                                            }
                                    </code>          
                                </pre>
                </div>
                <div class=" large center">
                    ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢ğŸ˜¢
                </div>
                <div class=" large danger center down-3">
                    <span class="fragment">
                        PP701ï½</span>
                </div>
            </section>
            <section>
                <div class="down-3">
                    <h2>ä»ç®€å•çš„å¼€å§‹</h2>
                </div>
                <div class="down-5">
                    <pre class="java">
                        <code data-trim>
                            public class BasicHolder&lt;T&gt; {
                                T element;
                                void set(T arg){this.element = arg;}
                                T get(){return this.element;}
                                void print(){
                                    System.out.println(element.getClass().getSimpleName());
                                }
                            }
                            
                            public class SubType extends BasicHolder&lt;SubType&gt; {
                                public static void main(String[] args){
                                    SubType s1 = new SubType();
                                    SubType s3 = s1.get();
                                    s1.print();
                                    s3.print();
                                }
                            }
                        </code>          
                    </pre>
                </div>
                <div class=" large danger center down-1">
                    <span class="fragment">
                        å¾—åˆ°ä»€ä¹ˆï¼Ÿ </span>
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>å¾—åˆ°ä»€ä¹ˆï¼Ÿ</h2>
                </div>
                <div class="down-9">
                    <pre class="java">
                            <code data-trim>
                                public class SubType extends BasicHolder&lt;SubType&gt; {}
                                public class Plate extends BasicHolder&lt;Plate&gt;{}
                                ...
                            </code>          
                        </pre>
                </div>
                <div class=" large danger center down-3">
                    <span class="fragment">
                        P703: ... the generic base class becomes a kind of template for comon functionality for all its
                        derived class</span>
                </div>
                <div class=" large danger center down-3">
                    <span class="fragment">
                        è¿™è·Ÿå®ç°ä¸€ä¸ªçˆ¶ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span>
                </div>
            </section>
            <section>
                <div class="down-3">
                    <h2>è·Ÿæ™®é€šç»§æ‰¿å…³ç³»çš„åŒºåˆ«</h2>
                </div>

                <div class="down-9">
                    ... but this functionality will use the derived type for all of its arguments and return values ...
                </div>
                <div class=" large danger center down-3">
                    <span class="fragment">
                        å¹²å¾—æ¼‚äº®</span>
                </div>
            </section>

            <section>
                <div class="down-3">
                    <h2>è¿˜æœ‰ä¸€ç‚¹å°é—®é¢˜</h2>
                </div>
                <div class="down-9">
                    <pre class="java">
                            <code data-trim>
                                class Other{}
                                class BasicOther extends BasicHolder&lt;Other&gt;{}
                                
                                public static void main(String[] args){
                                    BasicOther b = new BasicOther(), b2 = new BasicOther();
                                    b.set(new Other());
                                    Other other = b.get();
                                    b.print();// Other
                                }
                            </code>          
                        </pre>
                </div>
                <div class=" large danger center down-3">
                    <span class="fragment">
                        æ²¡å®Œå…¨é™åˆ¶</span>
                </div>

            </section>
            <section>
                <div class="down-3">
                    <h2>Self-bounded</h2>
                </div>
                <div class="down-1">
                    <pre class="java">
                            <code data-trim>
                                class SelfBounded&lt;T extends SelfBounded&lt;T&gt;&gt; {
                                    T element;
                                    SelfBounded&lt;T&gt; set(T arg){
                                        element = arg;
                                        return this;
                                    }
                                    T get(){return element;}
                                }
                                
                                class A extends SelfBounded&lt;A&gt; {}
                                class B extends SelfBounded&lt;A&gt; {} //ok 
                                class D;
                                class E extends SelfBounded&lt;D&gt;{} //error
                                
                                public static void main(String[] args){
                                        A a = new A();
                                        a.set(new A());
                                        a.print();
                                
                                        B b = new B(), a2 = new B();
                                        //b.set(b2); //Error
                                        //b.print();
                                }
                            </code>          
                        </pre>
                </div>
                <div class=" large danger center down-3">
                    <span class="fragment">
                        ... forcing the generic to be used as its own bound argument
                    </span>
                </div>

            </section>

            <section>
                <div class="down-3">
                    <h2>é«˜å¤§ä¸Šä¸€ç‚¹çš„è¯´æ³•</h2>
                </div>

                <div class="down-9 center larger">
                    Argument covariance
                </div>
                <div class="down-3 center larger">
                    &
                </div>
                <div class="down-3 center larger">
                    Covariant return types
                </div>
            </section>

            <section>

                <div class="down-3">
                    <h2>Rewrite è‘«èŠ¦å¨ƒ with Generics</h2>
                </div>
                <div class="center down-9">
                    <img
                        src="https://camo.githubusercontent.com/a5cc35d2179c5bf861f6a8eeca25fc5fa3e876a2/687474703a2f2f656e676c6973682e6372692e636e2f6d6d736f757263652f696d616765732f323030392f30362f32342f34363334636172746f6e312e6a7067" />

                </div>
            </section>
        </div>
    </div>
</body>
</head>

</html>